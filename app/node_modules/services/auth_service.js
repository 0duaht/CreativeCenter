const apiUrl = "https://dig-library.herokuapp.com"
// const apiUrl = "http://localhost:9192"
module.exports = {
  loginUser: function(userObject, callback){
    this.post('/api/sessions', userObject, callback);
  },

  registerUser: function(userObject, callback){
    this.post('/api/users', userObject, callback)
  },

  post: function(url, object, callback){
    fetch(apiUrl + url, {
      method: 'POST',
      headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(object)
    })
    .then(response => {
      if (response.status == 200)
        response.json().then((response) => callback(response, 200))
      else
        response.json().then((response) => callback(response))
    })
    .catch(e => callback(e))
  }
}